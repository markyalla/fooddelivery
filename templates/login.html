{% extends 'base.html' %}  

{% block content %}  
<h2>User Login</h2>  
<form method="POST">  
    <div class="form-group">  
        <label for="email">Email</label>  
        <input type="email" class="form-control" id="email" name="email" required>  
    </div>  
    <div class="form-group">  
        <label for="password">Password</label>  
        <input type="password" class="form-control" id="password" name="password" required>  
    </div>  
    <button type="submit" class="btn btn-primary">Login</button>  
</form>  
<p class="mt-3">Don't have an account? <a href="{{ url_for('register') }}">Register</a></p> 

<script>  
    document.addEventListener('DOMContentLoaded', function() {  
        if (navigator.geolocation) {  
            navigator.geolocation.getCurrentPosition(function(position) {  
                // Send the location to the server  
                fetch('/update_location', {  
                    method: 'POST',  
                    headers: {  
                        'Content-Type': 'application/json',  
                          
                    },  
                    body: JSON.stringify({  
                        latitude: position.coords.latitude,  
                        longitude: position.coords.longitude  
                    })  
                });  
            });  
        } else {  
            console.error("Geolocation is not supported by this browser.");  
        }  
    });  
    </script>  
{% endblock %}